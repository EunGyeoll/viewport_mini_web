<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >


<mapper namespace="com.mycompany.viewport_mini_web.dao.PhotosDao">
	<insert id="insert" parameterType="Photos">
		<selectKey keyProperty="ptid" order="BEFORE"
			resultType="int">
			select seq_ptid.nextval from dual
		</selectKey>

		insert into photos(
		ptid,ptpid,ptattachoname,ptattachtype,ptattachdata
		) values(
		#{ptid},#{ptpid},#{ptattachoname},#{ptattachtype},#{ptattachdata}
		)
	</insert>
	
	<update id="updateImg" parameterType="Photos">
		update photos set
				ptattachoname=#{ptattachoname},
				ptattachtype=#{ptattachtype},
				ptattachdata=#{ptattachdata}		
		where ptpid=#{ptpid}
	</update>	

	<delete id="deleteByPtpid" parameterType="int">
		delete from photos
		where ptpid=#{ptpid}
	</delete>
</mapper>

